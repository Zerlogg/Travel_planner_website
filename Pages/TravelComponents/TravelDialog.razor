@inject DataContext Context
@inject ISnackbar Snackbar
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager NavigationManager

<MudForm @ref="_form" @bind-IsValid="@_success" Model="CurrentTrip" @bind-Errors="@_errors">
    <MudDialog>
        <DialogContent>
            <MudContainer Class="px-0 gap-4 d-flex flex-column" Style="width: 400px">
                <MudTextField T="string" Label="City" @bind-Value="@CurrentTrip.City" MaxLength="30" Variant="Variant.Outlined" Class="mt-0" Required="true"></MudTextField>
                <MudTextField T="string" Label="Description" @bind-Value="@CurrentTrip.Description" MaxLength="120" Variant="Variant.Outlined" Class="mt-0"></MudTextField>
                <MudNumericField T="double?" Label="Budget" @bind-Value="@CurrentTrip.Budget" MaxLength="12" Format="F2" HideSpinButtons="true" Variant="Variant.Outlined" Required="true" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Euro" />
                <MudTextField T="string" Label="Personal Preferences" @bind-Value="@CurrentTrip.Preferences" MaxLength="600" Lines="3" Variant="Variant.Outlined" Class="mt-0"></MudTextField>
                <MudSelect Label="Folder" Variant="Variant.Outlined" @bind-SelectedValues="@options" MultiSelection="true" AnchorOrigin="Origin.BottomCenter">
                    @foreach (var folder in _folders)
                    {
                        <MudSelectItem Value="@folder">@folder.Title</MudSelectItem>
                    }
                </MudSelect>
            </MudContainer>
        </DialogContent>
        <DialogActions>
            <MudButton OnClick="Cancel">Cancel</MudButton>
            <MudButton Color="Color.Primary" Disabled="@(!_success)" OnClick="EditTrip">Save</MudButton>
        </DialogActions>
    </MudDialog>
</MudForm>

       